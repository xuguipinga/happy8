# 电商后台管理系统 - 数据库设计文档 (v5.0 - 精细版)

## 1. 设计原则
*   **全字段映射**：数据库字段将与 Excel 源文件保持高度一致，确保数据不丢失。
*   **数据类型优化**：金额使用 `DECIMAL(12, 4)` 确保精度，时间使用 `DATETIME`。

## 2. 核心业务表结构

### 2.1 用户与权限表 (User & RBAC)

#### `sys_users` (系统用户表)
用于存储登录系统的管理员和员工。
| 字段名 | 类型 | 约束 | 默认值 | 说明 |
| :--- | :--- | :--- | :--- | :--- |
| `id` | INT | PK, AI | | 主键 |
| `parent_id` | INT | FK | NULL | 父账号ID (NULL为主账号) |
| `username` | VARCHAR(50) | UK | | 用户名 |
| `email` | VARCHAR(100) | UK | NULL | 邮箱 |
| `phone` | VARCHAR(20) | UK | NULL | 手机号 |
| `password_hash` | VARCHAR(255)| NN | | 密码哈希 |
| `is_active` | TINYINT | NN | 1 | 状态: 1启用 0禁用 |
| `created_at` | DATETIME | NN | NOW | 创建时间 |

#### `sys_roles` (角色表)
| 字段名 | 类型 | 说明 |
| :--- | :--- | :--- |
| `id` | INT | 主键 |
| `name` | VARCHAR(50) | 角色名 (admin, operator...) |
| `permissions` | JSON | 权限列表 (无需多表，JSON存储更灵活) |

---

### 2.2 销售订单表 (`biz_orders`)
> 对应源文件：`销售订单明细.xlsx`
> **设计策略**：几乎保留所有字段，用于多维度分析（如按国家、按买家分析）。

| 字段名 | 类型 | 说明 | 源Excel列名 |
| :--- | :--- | :--- | :--- |
| `id` | BIGINT | 主键 | |
| `platform_order_no` | VARCHAR(100) | **平台订单号** (唯一索引) | 订单号(Order Number) |
| `order_time` | DATETIME | 下单时间 | 订单创建时间(Order Create Time) |
| `buyer_email` | VARCHAR(150) | 买家邮箱 | 买家邮箱(Email) |
| `company_name` | VARCHAR(150) | 公司名称 | 公司名称(Company Name) |
| `buyer_name` | VARCHAR(100) | 买家姓名 | 买家姓名(Buyer Name) |
| `seller_name` | VARCHAR(100) | 卖家账号 | 卖家名称(Seller Name) |
| `product_name` | VARCHAR(255) | 商品名称 | 商品名称(Product Name) |
| `sku` | VARCHAR(100) | **SKU** (关联键) | SKU规格(Sku Specification) |
| `quantity` | INT | 数量 | 数量(Quantity) |
| `currency` | VARCHAR(10) | 币种 | 订单币种(Order Currency) |
| `unit_price` | DECIMAL(12,4) | 单价 | 单价(Unit Price) |
| `order_amount` | DECIMAL(12,4) | **订单总额** (GMV) | 订单总价(Order Amount) |
| `shipping_fee_income`| DECIMAL(12,4) | 运费收入 | 运费(Shipping Fee) |
| `discount_amount` | DECIMAL(12,4) | 折扣金额 | 折扣金额(Discount Amount) |
| `actual_paid` | DECIMAL(12,4) | 实付金额(预+尾) | 预付款 + 尾款 |
| `order_status` | VARCHAR(50) | 状态 | 状态(Status) |
| `order_type` | VARCHAR(50) | 订单类型 | 订单类型(Order Type) |
| `has_attachment` | TINYINT | 是否有合同 | 是否有合同附件(Attachment) |
| `actual_delivery_time`| DATETIME | 实际发货时间 | 实际发货时间 |
| `buyer_country` | VARCHAR(50) | **买家国家** | 买家国家(Buyer Country) |
| `tax_fee` | DECIMAL(12,4) | 税费 | 税费合计(Tax Fee) |
| `shipping_address` | TEXT | 收货地址 | 收货地址(Shipping Address) |
| `remark` | TEXT | 备注 | 订单备注(Order Remark) |
| **`cost_price`** | DECIMAL(12,4) | *计算字段: 采购成本* | (系统自动回填) |
| **`logistics_cost`** | DECIMAL(12,4) | *计算字段: 物流支出* | (系统自动回填) |
| **`profit`** | DECIMAL(12,4) | *计算字段: 毛利* | (系统自动计算) |

---

### 2.3 采购明细表 (`biz_purchases`)
> 对应源文件：`采购.xlsx`

| 字段名 | 类型 | 说明 | 源Excel列名 |
| :--- | :--- | :--- | :--- |
| `id` | BIGINT | 主键 | |
| `purchase_no` | VARCHAR(100) | **采购单号** | 采购单号 |
| `supplier_company` | VARCHAR(150) | 供应商公司 | 供应商公司名 |
| `supplier_member` | VARCHAR(100) | 供应商对接人 | 供应商会员名 |
| `buyer_company` | VARCHAR(150) | 采购方公司 | 采购方公司名 |
| `buyer_member` | VARCHAR(100) | 采购员 | 采购方会员名 |
| `sku` | VARCHAR(100) | **SKU** (关联键) | 货品规格 |
| `product_name` | VARCHAR(255) | 货品标题 | 货品标题 |
| `quantity` | DECIMAL(10,2)| 采购数量 | 数量(含单位) |
| `unit_price` | DECIMAL(12,4) | **采购单价** | 单价(元) |
| `goods_amount` | DECIMAL(12,4) | 货品总价 | 货品总价(元) |
| `shipping_fee` | DECIMAL(12,4) | 运费 | 运费(元) |
| `discount` | DECIMAL(12,4) | 折扣 | 涨价或折扣(元) |
| `actual_payment` | DECIMAL(12,4) | **实付款** | 实付款(元) |
| `order_status` | VARCHAR(50) | 采购状态 | 交易状态 |
| `create_time` | DATETIME | 创建时间 | 订单创建时间 |
| `pay_time` | DATETIME | 付款时间 | 订单付款时间 |
| `logistics_company`| VARCHAR(100) | 物流公司 | 物流公司 |
| `logistics_no` | VARCHAR(100) | 物流单号 | 物流单号 |
| `receiver_address` | TEXT | 收货地址 | 收货地址 |

---

### 2.4 物流运单表 (`biz_logistics`)
> 对应源文件：`物流.xlsx`

| 字段名 | 类型 | 说明 | 源Excel列名 |
| :--- | :--- | :--- | :--- |
| `id` | BIGINT | 主键 | |
| `tracking_no` | VARCHAR(100) | **运单号** | 运单号 |
| `ref_no` | VARCHAR(100) | 参考号/订单号 | 客户单号 |
| `logistics_channel`| VARCHAR(100) | 物流渠道 | 渠道 |
| `order_status` | VARCHAR(50) | 订单状态 | 订单状态 |
| `sent_date` | DATE | 发货日期 | 发货日 |
| `destination` | VARCHAR(50) | 目的地 | 目的地 |














































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































';;;;;;.






9