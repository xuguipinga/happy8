# 电商后台管理系统 - 产品需求文档 (PRD)

## 1. 产品概述

### 1.1 产品愿景
打造一个**数据驱动的一站式电商管理中台**，打通**采购-销售-物流-财务**全链路数据，通过自动化的盈亏分析报表，帮助商家精准掌握每一笔订单的利润情况，辅助经营决策。

### 1.2 核心痛点
*   **数据割裂**：订单在 Amazon/Shopee，采购在 1688，物流在货代系统，无法统一管理。
*   **核算困难**：人工核算盈亏耗时耗力，容易出错，无法精确到单品维度的利润分析。
*   **协作低效**：采购、运营、财务各管各的表，信息同步不及时。

## 2. 功能模块规划

### 2.1 用户与权限模块 (User & RBAC)
*   **多角色管理**：支持超级管理员、运营、采购、财务、物流专员等角色。
*   **主子账号体系**：主账号通过 `parent_id` 关联子账号，实现权限隔离。
*   **安全机制**：密码加密存储，支持密码可见性切换（仅前端输入时）。

### 2.2 订单管理模块 (Order Management)
*   **多平台数据接入**：支持导入主流电商平台（如 Amazon, Shopee, Lazada, 淘宝）的**销售订单明细 Excel**。
*   **数据标准化**：系统自动解析不同格式的 Excel，统一映射为标准订单结构。
*   **关键字段**：订单号、SKU、销售单价、销售数量、订单金额、平台佣金、交易手续费、买家国家。

### 2.3 采购管理模块 (Purchase Management)
*   **采购单录入**：支持导入**采购明细 Excel** 或手动录入。
*   **成本核算**：通过 SKU 自动匹配采购单价，计算商品成本 (COGS)。
*   **关键字段**：采购单号、供应商、SKU、采购单价、采购数量、采购运费、实付金额。

### 2.4 物流管理模块 (Logistics Management)
*   **运单导入**：支持导入**物流商账单 Excel**。
*   **运费分摊**：将物流费用精确对齐到每一个订单或 SKU。
*   **关键字段**：运单号、物流商、关联订单号、计费重量、实际运费、杂费。

### 2.5 盈亏分析报表 (P&L Analysis)
*   **核心算法**：
    > **单单利润 = 订单实收金额 - (商品采购成本 + 头程物流费 + 尾程配送费 + 平台佣金 + 营销推广费)**
*   **报表展示**：
    *   **总览**：今日/本月 GMV、毛利、毛利率。
    *   **SKU 级分析**：哪些商品最赚钱？哪些在亏损？
    *   **平台利润对比**：Amazon vs Shopee 哪个渠道利润更高？

## 3. 非功能性需求
*   **兼容性**：必须兼容现有的三个 Excel 模板格式（销售、采购、物流）。
*   **扩展性**：未来需支持更多平台的 Excel 模板配置。
*   **性能**：支持单次导入 10万行级别的 Excel 数据。
